<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>달력</title>
    <script
      src="https://kit.fontawesome.com/2cd23a15d7.js"
      crossorigin="anonymous"
    ></script>
</head>
<body>
    <!-- 달력 HTML 구조 -->
     <div id="container">
       <div id="date-wrap">
          <!-- 이전 > -->
          <button id="previousButton" onclick="previousButton()">
            <i class="fa-solid fa-less-than"></i>
          </button> 
          <!-- 2025년 9월 -->
          <div id="main_date"></div>
          <!-- 이후 < -->
          <button id="nextButton" onclick="nextButton()">
            <i class="fa-solid fa-greater-than"></i>
          </button>
       </div>
       <table id ="date-week">
          <thead>
            <th>SUN</th>
            <th>MON</th>
            <th>TUE</th>
            <th>WED</th>
            <th>THU</th>
            <th>FRI</th>
            <th>SAT</th>
          </thead>
       </table>
       <!-- 달력 날짜 값 입력 -->
        <div id="displayTable"></div>
     </div>

     <!-- script  -->
      <script>
        //  document 변수 만들기
        // 전역변수 : 전지역에서 사용할 수 있는 변수
        let yearMonth = document.getElementById('main_date');
        let displayTable = document.getElementById('displayTable')
        let today = new Date();//오늘낢짜/시간

        // 2차원배열 지정
        let arr = Array.from(Array(6),()=> new Array(7));

        // 달력의 배열에 값을 저장하는 함수
        function calendar(){
          // 1. 올해년도 출력하는 변수
          let year = today.getFullYear(); //2025
          // 2. 오늘날짜의 월을 출력하는 변수
          let month = today.getMonth(); // 8 => 8+1=9
          // 3. 이달의 마지막 일자 구하기
          //    일의 0을 지정하면 그전달의 마지막일자를 출력한다.
          //  new Date(2025,5,0) => 2025-4-30
          let lastDate = new Date(year,month+1,0);
          // 마지막 일자 출력하는 변수
          let lastDay = lastDate.getDate();
          // 4. 이달의 시작일인 1의 요일을 구하기
          //    getDay() : 0(일) ~ 6(토)
          //    1월:0 ~ 12월:11
          let startDate = new Date(year,month, 1);
          // 당해년도 월의 시작일자 1
          let startDay = startDate.getDate();
          // 당해년도 월의 시작일자의 요일
          let startWeek = startDate.getDay();

          // 가로 시작
          let row= 0;

          // 배열초기화
          // 배열초기화 안하면 undefiend가 출력되기때문에
          // 반드시 초기화 한다.
          for(let i=0; i<arr.length; i++){
               for(let j=0; j<arr[i].length; j++){
                   arr[i][j]='';
               }
          }

          // 핵심코드
          // 달력배열에 실제 날짜를 채우는 핵심 로직
          // i=시작일1, i<=마지막일자 30까지 루프 돌려
          for(let i=startDay; i<=lastDay; i++){
              // 현재 달의 1일부터 마지막 날까지 반복
              // day=0, startweek=1 => arr[0][1] = 1
              arr[row][startWeek] = i;

              // 7일이되면 줄바꿈 코드
              // startWeek : 7 < 6
              if(startWeek < arr[row].length-1){
                // 만약에 현재요일이 6(토요일)이 아니면
                startWeek++;
              }else{
                // 현재 요일이 토요일이면 한 주가 끝난 것
                // 다음행으로 이동
                row++;
                // startWeek를 0으로 리셋
                startWeek=0;
              }
          }
        }
        // display() 호출 하여 화면 출력
        // display();
        // display 출력하는 함수
        function display(){
          // 반드시 해야하는 작업
          calendar(); //달려 호출
          let tb ="<table class='cal_table'>";
            // 가로줄
          for(let i=0; i<arr.length; i++){
             tb += "<tr>";
              // 세로줄
              for(let j=0; j<arr[i].length; j++){
                 tb += "<td>" + arr[i][j]+"</td>"
              }
             tb += "</tr>" 
          }
          tb += "</table>"
          // 상단의 년월을 입력
          // yearMonth
          let yearmon = today.getFullYear() + '년' + (today.getMonth()+1)+"월"
          yearMonth.innerHTML = yearmon;
          // 배열의 달력
          displayTable.innerHTML = tb;
        }
        display(); // 함수 호출

        // 이전 버튼 클릭시 날짜의 월이 -1씩 줄어들면 된다.
        function previousButton(){
            today = new Date(today.getFullYear(),today.getMonth()-1,1);
            display();
        }
        // 이후 버튼 클릭시 날자의 월이 +1씩 증가되면 된다.
        function nextButton(){
          today = new Date(today.getFullYear(),today.getMonth()+1,1);
          display();
        }
      </script>
</body>
</html>